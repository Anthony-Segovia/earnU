import { getStacksProvider } from './utils.esm.js';
import { authenticate } from './auth.esm.js';
import { defineCustomElements } from '@stacks/connect-ui/loader';
import { ConnectModal } from '@stacks/connect-ui/dist/components/connect-modal';

var showConnect = function showConnect(authOptions) {
  if (getStacksProvider()) {
    void authenticate(authOptions);
    return;
  }

  if (typeof window !== void 0) {
    void defineCustomElements(window);
    var element = document.createElement("connect-modal");
    element.authOptions = authOptions;
    document.body.appendChild(element);

    var handleEsc = function handleEsc(ev) {
      if (ev.key === "Escape") {
        document.removeEventListener("keydown", handleEsc);
        element.remove();
      }
    };

    document.addEventListener("keydown", handleEsc);
  }
};
var showConnectStatic = function showConnectStatic(authOptions) {
  var _window, _window$customElement;

  if (getStacksProvider()) {
    void authenticate(authOptions);
    return;
  }

  if (typeof ((_window = window) == null ? void 0 : (_window$customElement = _window.customElements) == null ? void 0 : _window$customElement.define) === "function") {
    if (customElements.get("connect-modal") === void 0) {
      customElements.define("connect-modal", ConnectModal);
    }

    var element = document.createElement("connect-modal");
    element.authOptions = authOptions;
    document.body.appendChild(element);

    var handleEsc = function handleEsc(ev) {
      if (ev.key === "Escape") {
        document.removeEventListener("keydown", handleEsc);
        element.remove();
      }
    };

    document.addEventListener("keydown", handleEsc);
  }
};
var showBlockstackConnect = function showBlockstackConnect(authOptions) {
  return showConnect(authOptions);
};

export { showBlockstackConnect, showConnect, showConnectStatic };
//# sourceMappingURL=ui.esm.js.map
